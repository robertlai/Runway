// Generated by CoffeeScript 1.9.3
var app;

app = angular.module('homeApp', []);

app.controller('homeController', function($scope, $http) {
  var socket;
  socket = io();
  $scope.newGroupName = '';
  $scope.error = null;
  socket.on('groupList', function(groups) {
    $scope.groups = groups;
    return $scope.$apply();
  });
  socket.on('newGroupError', function(error) {
    $scope.error = error;
    return $scope.$apply();
  });
  socket.on('newGroup', function(newGroup) {
    $scope.groups.push(newGroup);
    $scope.error = null;
    return $scope.$apply();
  });
  $scope.init = function(username) {
    $scope.username = username;
    return socket.emit('getGroupList', username);
  };
  return $scope.addGroup = function() {
    if ($scope.newGroupName.trim().length > 0) {
      return $http.post('/api/newGroup?newGroupName=test').then((function(res) {
        console.log('success');
        $scope.groups.push($scope.newGroupName);
        return $scope.newGroupName = '';
      }), function(err) {
        return console.log('error');
      });
    }
  };
});

// Generated by CoffeeScript 1.9.3
var isLoggedIn;

isLoggedIn = function(req, res, next) {
  if (req.isAuthenticated()) {
    return next();
  } else {
    return res.redirect('/login');
  }
};

module.exports = function(app, passport) {
  app.get('/login', function(req, res) {
    return res.render('login', {
      title: 'Login'
    });
  });
  app.post('/login', passport.authenticate('local-login', {
    successRedirect: '/workspace',
    failureRedirect: '/login'
  }));
  app.get('/register', function(req, res) {
    return res.render('register', {
      title: 'Register'
    });
  });
  app.post('/register', passport.authenticate('local-register', {
    successRedirect: '/workspace',
    failureRedirect: '/register'
  }));
  app.get('/workspace', isLoggedIn, function(req, res) {
    return res.render('workspace');
  });
  app.get('/logout', function(req, res) {
    req.logout();
    return res.redirect('/login');
  });
  return app.get('*', function(req, res) {
    return res.redirect('/login');
  });
};
